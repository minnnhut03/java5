<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Gi·ªè h√†ng</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f5f5f5;
            font-family: 'Arial', sans-serif;
        }
        .container {
            max-width: 800px;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.2);
        }
        h2 {
            font-weight: bold;
            color: #333;
        }
        .table {
            border-radius: 10px;
            overflow: hidden;
        }
        .table th {
            background-color: #343a40 !important;
            color: white;
            text-align: center;
            font-size: 16px;
        }
        .table td {
            text-align: center;
            vertical-align: middle;
            font-size: 15px;
        }
        h4 {
            font-size: 18px;
            font-weight: bold;
            color: #d9534f;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            font-weight: bold;
            color: #555;
        }
        .form-control {
            border-radius: 5px;
            padding: 10px;
            border: 1px solid #ccc;
        }
        .btn-group-custom {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .btn-success {
            width: 150px;
            font-size: 14px;
            font-weight: bold;
            padding: 10px;
            border-radius: 5px;
            transition: 0.3s;
        }
        .btn-success:hover {
            background-color: #218838;
            transform: scale(1.05);
        }
        .btn-cancel {
            width: 100px;
            font-size: 14px;
            font-weight: bold;
            padding: 10px;
            border-radius: 5px;
            border: 2px solid #d9534f;
            color: #d9534f;
            background-color: white;
            transition: 0.3s;
            text-align: center;
        }
        .btn-cancel:hover {
            background-color: #d9534f;
            color: white;
            transform: scale(1.05);
            text-decoration: none;
        }
    </style>

</head>
<body>
	<div th:insert="~{user/header :: header}"></div>
	<div class="container mt-3">
		<h2 class="mb-3 text-center">ƒê∆°n H√†ng C·ªßa B·∫°n</h2>

        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>T√™n s·∫£n ph·∫©m</th>
                    <th>S·ªë l∆∞·ª£ng</th>
                    <th>Gi√°</th>
                    <th>T·ªïng</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="item : ${selectedCartItems}">
                    <td th:text="${item.product.name}"></td>
                    <td th:text="${item.quantity}"></td>
                    <td th:text="${#numbers.formatDecimal(item.product.price, 0, 'COMMA', 0, 'POINT')} + ' VND'"></td>
                    <td th:text="${#numbers.formatDecimal(item.quantity * item.product.price, 0, 'COMMA', 0, 'POINT')} + ' VND'"></td>
                </tr>
            </tbody>
        </table>

        <div class="text-end mt-3">
            <h4><b>T·ªïng ti·ªÅn:</b> 
                <span th:text="${#numbers.formatDecimal(totalPrice, 0, 'COMMA', 0, 'POINT')} + ' VND'"></span>
            </h4>
        </div>

        <!-- Form nh·∫≠p ƒë·ªãa ch·ªâ giao h√†ng -->
        <form action="/checkout" method="post" class="mt-4">
            <h4 class="mb-3">üìç Ch·ªçn ƒë·ªãa ch·ªâ giao h√†ng</h4>
            <div class="form-group d-flex align-items-center">
                <label for="address" class="me-2">ƒê·ªãa ch·ªâ c·ªßa b·∫°n:</label>
                <select class="form-control" id="address" name="addressId" required>
                    <option value="">-- Ch·ªçn ƒë·ªãa ch·ªâ --</option>
                    <option th:each="addr : ${addressList}" 
                            th:value="${addr.id}" 
                            th:text="${addr.customerName} + ' - ' + ${addr.phoneNumber} + ' - ' + ${addr.address}">
                    </option>
                </select>
                <a href="/user/address/add" class="btn btn-primary ms-2">‚ûï Th√™m ƒë·ªãa ch·ªâ</a>
            </div>

            <h4 class="mb-3">üìç Ho·∫∑c nh·∫≠p ƒë·ªãa ch·ªâ m·ªõi</h4>
            <div class="form-group">
                <label for="name">H·ªç v√† T√™n:</label>
                <input type="text" class="form-control" id="name" name="name" placeholder="Nh·∫≠p h·ªç v√† t√™n">
            </div>
            <div class="form-group">
                <label for="phone">S·ªë ƒëi·ªán tho·∫°i:</label>
                <input type="text" class="form-control" id="phone" name="phone" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i">
            </div>
            <div class="form-group">
                <label for="addressInput">ƒê·ªãa ch·ªâ:</label>
                <input type="text" class="form-control" id="addressInput" name="address" placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ giao h√†ng">
            </div>

            <div class="btn-group-custom mt-3">
                <button type="submit" class="btn btn-success">Thanh to√°n ngay</button>
                <a href="/user/cart" class="btn-cancel">H·ªßy</a>
            </div>
        </form>
    </div>

</body>
</html>
